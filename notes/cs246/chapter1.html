<!DOCTYPE html><html><head><meta charset="utf-8"><style>/* {
}

body {
    padding-left: 10px;
    padding-right: 10px;
    margin-right: auto;
    margin-left: auto;
}

body .markdown-body {
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 3px;
    word-wrap: break-word;
}

pre {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    color: #333;
    font-family: "Segoe UI", Frutiger, "Frutiger Linotype", "Dejavu Sans", "Helvetica Neue", Arial, sans-serif;
    font-size: 20px;
    line-height: 1.2;
    word-wrap: break-word;
}

.markdown-body a {
    background-color: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
    outline: 0;
}

.markdown-body strong {
    font-weight: bold;
    color: #BC0000;
}

.markdown-body h1 {
    margin: 0.67em 0;
}

.markdown-body img {
    border: 0;
    box-shadow: 5px 5px 5px #D6D6D6;
}

.markdown-body hr {
    box-sizing: content-box;
    height: 0;
}

.markdown-body pre {
    overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
    font-family: monospace, monospace;
    font-size: 1em;
}

.markdown-body input {
    color: inherit;
    font: inherit;
    margin: 0;
}

.markdown-body html input[disabled] {
    cursor: default;
}

.markdown-body input {
    line-height: normal;
}

.markdown-body input[type="checkbox"] {
    box-sizing: border-box;
    padding: 0;
}

.markdown-body table {
    border-collapse: collapse;
    border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
    padding: 0;
}

.markdown-body input {
    font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

.markdown-body a {
    color: #4078c0;
    text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:active {
    text-decoration: underline;
}

.markdown-body hr {
    height: 0;
    margin: 15px 0;
    overflow: hidden;
    background: transparent;
    border: 0;
    border-bottom: 1px solid #ddd;
}

.markdown-body hr:before {
    display: table;
    content: "";
}

.markdown-body hr:after {
    display: table;
    clear: both;
    content: "";
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
    margin-top: 15px;
    margin-bottom: 15px;
    line-height: 1.1;
    color: #011380;
}

.markdown-body h1 {
    font-size: 30px;
}

.markdown-body h2 {
    font-size: 21px;
}

.markdown-body h3 {
    font-size: 16px;
}

.markdown-body h4 {
    font-size: 14px;
}

.markdown-body h5 {
    font-size: 12px;
}

.markdown-body h6 {
    font-size: 11px;
}

.markdown-body blockquote {
    margin: 0;
}

.markdown-body ul,
.markdown-body ol {
    padding: 0;
    margin-top: 0;
    margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
    list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
    list-style-type: lower-alpha;
}

.markdown-body dd {
    margin-left: 0;
}

.markdown-body code {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 12px;
}

.markdown-body pre {
    margin-top: 0;
    margin-bottom: 0;
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body .select::-ms-expand {
    opacity: 0;
}

.markdown-body .octicon {
    font: normal normal normal 16px/1 octicons-anchor;
    display: inline-block;
    text-decoration: none;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.markdown-body .octicon-link:before {
    content: '\f05c';
}

.markdown-body:before {
    display: table;
    content: "";
}

.markdown-body:after {
    display: table;
    clear: both;
    content: "";
}

.markdown-body>*:first-child {
    margin-top: 0 !important;
}

.markdown-body>*:last-child {
    margin-bottom: 0 !important;
}

.markdown-body a:not([href]) {
    color: inherit;
    text-decoration: none;
}

.markdown-body .anchor {
    display: inline-block;
    padding-right: 2px;
    margin-left: -18px;
}

.markdown-body .anchor:focus {
    outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
    margin-top: 1em;
    margin-bottom: 16px;
    font-weight: bold;
    line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
    color: #000;
    vertical-align: middle;
    visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
    text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
    visibility: visible;
}

.markdown-body h1 {

    padding-bottom: 0.3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}

.markdown-body h1 .anchor {
    line-height: 1;
}

.markdown-body h2 {

  border-top: 4px solid #4B0000;
  background-color: #BFADAD;
    padding: 5px;
    font-size: 1.75em;
    line-height: 1.225;
}

.markdown-body h2 .anchor {
    line-height: 1;
}

.markdown-body h3 {
    font-size: 1.5em;
    line-height: 1.43;
}

.markdown-body h3 .anchor {
    line-height: 1.2;
}

.markdown-body h4 {
    font-size: 1.25em;
}

.markdown-body h4 .anchor {
    line-height: 1.2;
}

.markdown-body h5 {
    font-size: 1em;
}

.markdown-body h5 .anchor {
    line-height: 1.1;
}

.markdown-body h6 {
    font-size: 1em;
    color: #777;
}

.markdown-body h6 .anchor {
    line-height: 1.1;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre {
    margin-top: 0;
    margin-bottom: 16px;
}

.markdown-body hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
    padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
    margin-top: 0;
    margin-bottom: 0;
}

.markdown-body li>p {
    margin-top: 16px;
}

.markdown-body dl {
    padding: 0;
}

.markdown-body dl dt {
    padding: 0;
    margin-top: 16px;
    font-size: 1em;
    font-style: italic;
    font-weight: bold;
}

.markdown-body dl dd {
    padding: 0 16px;
    margin-bottom: 16px;
}

.markdown-body blockquote {
    padding: 0 15px;
    color: #012A58;
    border-left: 4px solid #68AFFF;
    background-color: #BAD9FB
}

.markdown-body blockquote>:first-child {
    margin-top: 0;
}

.markdown-body blockquote>:last-child {
    margin-bottom: 0;
}

.markdown-body table {
    display: block;
    width: 100%;
    overflow: auto;
    word-break: normal;
    word-break: keep-all;
}

.markdown-body table th {
    font-weight: bold;
    color: #012C45;
}

.markdown-body table th,
.markdown-body table td {
    padding: 6px 13px;
    border: 1px solid #4283A9;
}

.markdown-body table tr {
    background-color: #fff;
    border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
    background-color: #D1EEFF;
}

.markdown-body img {
    max-width: 100%;
    box-sizing: content-box;
    background-color: #fff;
}

.markdown-body code {
    padding: 0;
    padding-top: 0.2em;
    padding-bottom: 0.2em;
    margin: 0;
    font-size: 85%;
    background-color: #F1F1F1;
}

.markdown-body code:before,
.markdown-body code:after {
    letter-spacing: -0.2em;
    content: "\00a0";
}

.markdown-body pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
}

.markdown-body .highlight {
    margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
    background-color: #FDFFCB;
    border-left: 4px solid #8E9402;
}

.markdown-body .highlight pre {
    margin-bottom: 0;
    word-break: normal;
}

.markdown-body pre {
    word-wrap: normal;
}

.markdown-body pre code {
    display: inline;
    max-width: initial;
    padding: 0;
    margin: 0;
    overflow: initial;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
    content: normal;
}

.markdown-body kbd {
    display: inline-block;
    padding: 3px 5px;
    font-size: 11px;
    line-height: 10px;
    color: #555;
    vertical-align: middle;
    background-color: #fcfcfc;
    border: solid 1px #ccc;
    border-bottom-color: #bbb;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #bbb;
}

.markdown-body .pl-c {
    color: #009B00;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
    color: #0086b3;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
    color: #795da3;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
    color: #333;
}

.markdown-body .pl-ent {
    color: #63a35c;
}

.markdown-body .pl-k {
    color: #a71d5d;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
    color: #183691;
}

.markdown-body .pl-v {
    color: #ed6a43;
}

.markdown-body .pl-id {
    color: #b52a1d;
}

.markdown-body .pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
}

.markdown-body .pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
}

.markdown-body .pl-ml {
    color: #693a17;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
    color: #1d3e81;
    font-weight: bold;
}

.markdown-body .pl-mq {
    color: #008080;
}

.markdown-body .pl-mi {
    color: #333;
    font-style: italic;
}

.markdown-body .pl-mb {
    color: #333;
    font-weight: bold;
}

.markdown-body .pl-md {
    background-color: #ffecec;
    color: #bd2c00;
}

.markdown-body .pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
}

.markdown-body .pl-mdr {
    color: #795da3;
    font-weight: bold;
}

.markdown-body .pl-mo {
    color: #1d3e81;
}

.markdown-body kbd {
    display: inline-block;
    padding: 3px 5px;
    font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    line-height: 10px;
    color: #555;
    vertical-align: middle;
    background-color: #fcfcfc;
    border: solid 1px #ccc;
    border-bottom-color: #bbb;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #bbb;
}

.markdown-body .plan-price-unit {
    color: #767676;
    font-weight: normal;
}

.markdown-body .task-list-item {
    list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
    margin-top: 3px;
}

.markdown-body .task-list-item input {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.markdown-body .plan-choice {
    padding: 15px;
    padding-left: 40px;
    display: block;
    border: 1px solid #e0e0e0;
    position: relative;
    font-weight: normal;
    background-color: #fafafa;
}

.markdown-body .plan-choice.open {
    background-color: #fff;
}

.markdown-body .plan-choice.open .plan-choice-seat-breakdown {
    display: block;
}

.markdown-body .plan-choice-free {
    border-radius: 3px 3px 0 0;
}

.markdown-body .plan-choice-paid {
    border-radius: 0 0 3px 3px;
    border-top: 0;
    margin-bottom: 20px;
}

.markdown-body .plan-choice-radio {
    position: absolute;
    left: 15px;
    top: 18px;
}

.markdown-body .plan-choice-exp {
    color: #999;
    font-size: 12px;
    margin-top: 5px;
}

.markdown-body .plan-choice-seat-breakdown {
    margin-top: 10px;
    display: none;
}

.markdown-body:checked+.radio-label {
    z-index: 1;
    position: relative;
    border-color: #4078c0;
    }*/


/*.MathJax_Display {
    color: #4B0158;
    padding-top: 5px;
    padding-bottom: 5px;
    background-color: #FEFAFF
    }*/


/* Extracted and interpreted from adcstyle.css and frameset_styles.css */


/* body */

body {
    margin: 20px auto;
    width: 80%;
    background-color: #fff;
    color: #000;
    /*font: 20px "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;*/
    font: 20px Georgia, serif;
    line-height: 1.3;
}

p {
    text-indent: 50px;
}

/* links */

a:link {
    color: #00f;
    text-decoration: none;
}

a:visited {
    color: #00a;
    text-decoration: none;
}

a:hover {
    color: #f60;
    text-decoration: underline;
}

a:active {
    color: #f60;
    text-decoration: underline;
}


/* html tags */


/*  Work around IE/Win code size bug - courtesy Jesper, waffle.wootest.net  */


/** html code {
    font-size: 101%;
}

* html pre {
    font-size: 101%;
    }*/


/* code */

pre,
code {
    font-size: 20px;
    font-family: monaco, courier, consolas, monospace;
}

code {
    background-color: #EFEFEF;
    padding: 3px;
}

pre {
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #c7cfd5;
    background: #f1f5f9;
    margin: 20px 0;
    padding: 8px;
    text-align: left;
    border-radius: 3px;
    border-left-width: 3px;
    border-left-color: #94B0F7;
    white-space: pre-wrap;
    /* CSS3 */
    white-space: -moz-pre-wrap;
    /* Firefox */
    white-space: -pre-wrap;
    /* Opera <7 */
    white-space: -o-pre-wrap;
    /* Opera 7 */
    word-wrap: break-word;
    /* IE */
}

blockquote {
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #D5D5C7;
    background: #F9F9F1;
    margin: 20px 0;
    padding: 8px;
    text-align: left;
    border-radius: 3px;
    border-left-width: 3px;
    border-left-color: #E6E770;
    white-space: pre-wrap;
    /* CSS3 */
    white-space: -moz-pre-wrap;
    /* Firefox */
    white-space: -pre-wrap;
    /* Opera <7 */
    white-space: -o-pre-wrap;
    /* Opera 7 */
    word-wrap: break-word;
    /* IE */
}

hr {
    color: #919699;
    size: 1;
    width: 100%;
    noshade: "noshade"
}


/* headers */

h1,
h2,
h3,
h4,
h5,
h6 {
    /*font-family: "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;*/
    font-weight: bold;
}

h1 {
    margin-top: 1em;
    margin-bottom: 25px;
    color: #000;
    font-weight: bold;
    font-size: 35px;
    text-align: center;
}

h2 {
    margin-top: 2.5em;
    font-size: 30px;
    color: #000;
    padding-bottom: 2px;
    border-bottom: 1px solid #919699;
    border-left-style: solid;
    border-left-width: 15px;
    border-left-color: #000565;
    padding-left: 5px;
}

h3 {
    margin-top: 2em;
    margin-bottom: .5em;
    font-size: 25px;
    color: #000;
}

h4 {
    /*margin-top: 2em;*/
    /*margin-top: 5px;*/
    margin-bottom: .5em;
    font-size: 23px;
    color: #000;
}

h5 {
    margin-top: 5px;
    margin-bottom: .5em;
    padding: 0;
    font-size: 21px;
    color: #000;
}

h6 {
    margin-top: 20px;
    margin-bottom: .5em;
    padding: 0;
    font-size: 11px;
    color: #000;
}

p {
    margin-top: 0px;
    margin-bottom: 10px;
}


/* lists */

ul {
    list-style: square outside;
    margin: 0 0 0 30px;
    padding: 0 0 12px 6px;
}

li {
    margin-top: 7px;
}

ol {
    list-style-type: decimal;
    list-style-position: outside;
    margin: 0 0 0 30px;
    padding: 0 0 12px 6px;
}

ol ol {
    list-style-type: lower-alpha;
    list-style-position: outside;
    margin: 7px 0 0 30px;
    padding: 0 0 0 10px;
}

ul ul {
    margin-left: 40px;
    padding: 0 0 0 6px;
}

li>p {
    display: inline
}

li>p+p {
    display: block
}

li>a+p {
    display: block
}


/* table */

table {
    border-top: 1px solid #919699;
    border-left: 1px solid #919699;
    border-spacing: 0;
}

table th {
    padding: 4px 8px 4px 8px;
    background: #E2E2E2;
    /*font-size: 12px;*/
    border-bottom: 1px solid #919699;
    border-right: 1px solid #919699;
}

table th p {
    font-weight: bold;
    margin-bottom: 0px;
}

table td {
    padding: 8px;
    /*font-size: 12px;*/
    vertical-align: top;
    border-bottom: 1px solid #919699;
    border-right: 1px solid #919699;
}

table td p {
    margin-bottom: 0px;
}

table td p + p {
    margin-top: 5px;
}

table td p + p + p {
    margin-top: 5px;
}


/* forms */

form {
    margin: 0;
}

button {
    margin: 3px 0 10px 0;
}

input {
    vertical-align: middle;
    padding: 0;
    margin: 0 0 5px 0;
}

select {
    vertical-align: middle;
    padding: 0;
    margin: 0 0 3px 0;
}

textarea {
    margin: 0 0 10px 0;
    width: 100%;
}

img {
    max-height: 400px; /* you can use % */
    max-width: 400px;
    height: auto;
    width: auto;
    border-style: solid;
    border-color: #B4B4B4;
    border-width: 2px;
}

.markdown-body .pl-c {
    color: #009B00;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
    color: #0086b3;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
    color: #795da3;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
    color: #333;
}

.markdown-body .pl-ent {
    color: #63a35c;
}

.markdown-body .pl-k {
    color: #a71d5d;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
    color: #183691;
}

.markdown-body .pl-v {
    color: #ed6a43;
}

.markdown-body .pl-id {
    color: #b52a1d;
}

.markdown-body .pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
}

.markdown-body .pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
}

.markdown-body .pl-ml {
    color: #693a17;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
    color: #1d3e81;
    font-weight: bold;
}

.markdown-body .pl-mq {
    color: #008080;
}

.markdown-body .pl-mi {
    color: #333;
    font-style: italic;
}

.markdown-body .pl-mb {
    color: #333;
    font-weight: bold;
}

.markdown-body .pl-md {
    background-color: #ffecec;
    color: #bd2c00;
}

.markdown-body .pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
}

.markdown-body .pl-mdr {
    color: #795da3;
    font-weight: bold;
}

.markdown-body .pl-mo {
    color: #1d3e81;
}
</style><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  config: ["MMLorHTML.js"],
  extensions: ["tex2jax.js"],
  jax: ["input/TeX"],
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: false
  },
  TeX: {
    extensions: ["AMSmath.js", "AMSsymbols.js"],
    TagSide: "right",
    TagIndent: ".8em",
    MultLineWidth: "85%",
    equationNumbers: {
      autoNumber: "AMS",
    },
    unicode: {
      fonts: "STIXGeneral,'Arial Unicode MS'"
    }
  },
  showProcessingMessages: false
});
</script>
<title>chapter1</title></head><body><article class="markdown-body"><h1>
<a id="user-content-shell" class="anchor" href="#shell" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Shell</h1>

<ul>
<li>  Computer interaction requires mechanisms to display information operations.</li>
<li>  Two main approaches are graphical and command line.</li>
<li>  <strong>Graphical user interface</strong> (GUI):

<ul>
<li>  icons represent actions (programs) and data (files)</li>
<li>  click on icon launches (start) a program or displays data</li>
<li>  program may pop up a dialog box for arguments to affect its execution.</li>
</ul>
</li>
<li>  <strong>Command-line interface</strong> (shell):

<ul>
<li>  text strings access programs (commands) and data (file names)</li>
<li>  command typed after a prompt in an interactive area to start it</li>
<li>  arguments follow the command to affect its execution.</li>
</ul>
</li>
<li>  Graphical interface easy for simple tasks, but seldom programmable for complex operations.</li>
<li>  Command-line interface harder for simple tasks (more typing), but allows programming.</li>
<li>  <strong>Shell</strong> is a program that reads commands and interprets them.</li>
<li>  Provide a simple programming-language with string variables and few statements.</li>
<li>  Unix shells falls into two basic camps: <strong>sh (ksh, bash)</strong> and <strong>csh (tcsh)</strong>, each with slightly different syntax and semantics.</li>
<li>  Command line begins with <strong>prompt</strong> $ (sh) or % $ (csh)</li>
<li>  Command types after prompt not executed until Enter key pressed</li>
<li>  Command comment begins with hash (#) and continues to end of line.</li>
<li>  Multiple commands on command line separated by semi-colon</li>
<li>  Commands can be edited on the command line</li>
<li>  Arrow keys $\uparrow, \downarrow$ move forward/backward through command history</li>
<li>  Tab key auto-completes partial command/file names</li>
<li>  Most commands have <strong>options</strong>, specified with a minus followed by one or more characters, which affect how the command operates.</li>
<li>  Options are normally processed left to right; one option may cancel another.</li>
<li>  No standardization for command option names and syntax.</li>
<li>  Shell command terminates with <code>exit</code>
</li>
<li>  Shell operation return an <strong>exit status</strong> via optional integer N (return node)

<ul>
<li>  exit status defaults to zero if unspecified, which usually means success.</li>
<li>  [N] is in range 0 - 255</li>
<li>  larger values are truncated</li>
<li>  negative values become unsigned</li>
<li>  Exist status can be read after execution and used to control further execution</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-11-file-system" class="anchor" href="#11-file-system" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.1 File System</h2>

<ul>
<li>  Shell commands interact extensively with the <strong>file system</strong>.</li>
<li>  Files are containers for data stored on persistent storage (usually disk).</li>
<li>  File names organized in N-ary tree: directories are vertexes, files are leaves.</li>
<li>  Information is stored at specific locations in the hierarchy.</li>
<li>  Directory name "/" is the root of the file system (Windows uses "\").</li>
<li>  <code>bin</code>,<code>lib</code>,<code>usr</code>,<code>include</code>: system commands, system libaray and include files.</li>
<li>  <code>tmp</code>: temporary files created by commands (<strong>shared among all users</strong>).</li>
<li>  <code>home</code> or <code>u</code>: user files are located in this directory.</li>
<li>  Directory for a particular user is called their <strong>home directory</strong>
</li>
<li>  Shell special character <code>~</code> (tilde) expands to user's home directory</li>
<li>  Every directory contains 2 special directories:

<ul>
<li>  <code>.</code> points to current directory</li>
<li>  <code>..</code> points to parent directory above the current directory</li>
</ul>
</li>
<li>  <strong>Hidden files</strong> contain administrative information and start with <code>.</code>.</li>
<li>  Each file has a unique path-name referenced with an absolute pathname.</li>
<li>  <strong>Absolute pathname</strong> is a list of all the directory names from the root of the file name separated by the forward slash character "/"</li>
<li>  Shell provides concept of <strong>working directory (current directory)</strong>, which is the active location in the file hierarchy.</li>
<li>  After sign on, the working directory starts at user's home directory.</li>
<li>  File name not starting with "/" is prefixed with working directory to create necessary absolute pathname.</li>
<li>  <strong>Relative pathname</strong> is file name/path prefixed with working directory.</li>
</ul>

<h2>
<a id="user-content-12-quoting" class="anchor" href="#12-quoting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.2 Quoting</h2>

<ul>
<li>  <strong>Quoting</strong> controls how shell interprets strings of characters.</li>
<li>  <strong>Blackslash (\)</strong> escape any character, including special character.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> .[<span class="pl-k">!</span>.]<span class="pl-k">*</span> <span class="pl-c"># globbing pattern</span>
.bashrc .emacs .login .vimrc
$ <span class="pl-c1">echo</span> <span class="pl-cce">\.\[\!\.\]\*</span> <span class="pl-c"># print globbing pattern</span>
.[<span class="pl-k">!</span>.]<span class="pl-k">*</span></pre></div>

<ul>
<li>  <strong>Backquote (`) or $()</strong> execute text as a command, and substitute with command output.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> 8whoami 8
<span class="pl-c"># $ whoami =&gt; jfdoe</span>
jfdoe
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">$(</span>date<span class="pl-pds">)</span></span>
Tue Dec 15 22:44:23 EST 2015</pre></div>

<ul>
<li>  Globbing does not occur within a single/double quoted string.</li>
<li>  <strong>Single quote (')</strong> protect everything (even newline) except single quote</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> Book Report <span class="pl-c">#2</span>
Book Report
$ <span class="pl-c1">echo</span> ’Book Report <span class="pl-c">#2’</span>
Book Report <span class="pl-c">#2</span>
$ <span class="pl-c1">echo</span> ’.[<span class="pl-k">!</span>.]<span class="pl-k">*</span>’ <span class="pl-c"># no globbing</span>
.[<span class="pl-k">!</span>.]<span class="pl-k">*</span>
$ <span class="pl-c1">echo</span> ’<span class="pl-cce">\.\[\!\.\]\*</span>’ <span class="pl-c"># no escaping</span>
<span class="pl-cce">\.\[\!\.\]\*</span>
$ <span class="pl-c1">echo</span> ’8whoami8’ <span class="pl-c"># no backquote</span>
8whoami 8
$ <span class="pl-c1">echo</span> ’abc <span class="pl-c"># yes newlineEnter</span>
<span class="pl-k">&gt;</span> cdf’ <span class="pl-c"># prompt “&gt;” means current line is incomplete</span>
abc <span class="pl-c"># yes newline</span>
cdf
$ <span class="pl-c1">echo</span> ’<span class="pl-cce">\’</span>’ <span class="pl-c"># no escape single quote</span>
<span class="pl-k">&gt;</span></pre></div>

<ul>
<li>  <strong>Double quote (")</strong> protect everything except double quote, backquote, and dollar sign</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>.[!.]*<span class="pl-pds">"</span></span> <span class="pl-c"># protect special characters</span>
.[<span class="pl-k">!</span>.]<span class="pl-k">*</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>\.\[\!\.\]\*<span class="pl-pds">"</span></span> <span class="pl-c"># no escaping</span>
<span class="pl-cce">\.\[\!\.\]\*</span>
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>8whoami8<span class="pl-pds">"</span></span> <span class="pl-c"># yes backquote</span>
cs246
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>abc # yes newlineEnter</span>
<span class="pl-s">&gt; cdf<span class="pl-pds">"</span></span>
abc <span class="pl-c"># yes newline</span>
cdf
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\"</span><span class="pl-pds">"</span></span> <span class="pl-c"># yes escape double quote</span>
<span class="pl-s"><span class="pl-pds">"</span></span></pre></div>

<ul>
<li>  String concatenation happens if text is adjacent to a string</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> xxx<span class="pl-s"><span class="pl-pds">"</span>yyy<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>b<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>d a<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>c<span class="pl-s"><span class="pl-pds">"</span>d<span class="pl-pds">"</span></span>
xxxyyy abcd abcd</pre></div>

<ul>
<li>  To stop prompting or output from any shell command, type -c, causing shell to interrupt current command.</li>
</ul>

<h2>
<a id="user-content-13-shell-commands" class="anchor" href="#13-shell-commands" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.3 Shell Commands</h2>

<ul>
<li>  A command typed after the prompt is executed by the shell or the shell calls a command program.</li>
<li>  Shell command read/write shell information/state.</li>
<li>  <code>help</code>: display information about bash commands (not sh or csh).</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">help</span> <span class="pl-c1">cd</span>
<span class="pl-c1">cd</span>: <span class="pl-c1">cd</span> [-L<span class="pl-k">|</span>-P] [dir]
Change the shell working directory. <span class="pl-c1">.</span> <span class="pl-c1">.</span></pre></div>

<p>Without argument, list all bash commands</p>

<ul>
<li>  <code>cd</code>: change the working directory</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> <span class="pl-c1">.</span> <span class="pl-c"># change to current directory</span>
$ <span class="pl-c1">cd</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># change to parent directory</span>
$ <span class="pl-c1">cd</span> cs246 <span class="pl-c"># change to subdirectory</span>
$ <span class="pl-c1">cd</span> cs246/a1 <span class="pl-c"># change to subsubdirectory</span></pre></div>

<ul>
<li>  <code>pwd</code>: print absolute path for working directory</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">pwd</span>
/u/jfdoe/cs246</pre></div>

<ul>
<li>
<p><code>history</code> and "!" (bang!): print a numbered history of most recent commands entered and access them.</p>

<ul>
<li>  <code>!N</code> return command <code>N</code>
</li>
<li>  <code>!!</code> return last command</li>
<li>  <code>!xyz</code> return last command starting with the string "xyz"</li>
</ul>
</li>
<li><p><code>alias</code>: substitution string for command name.</p></li>
<li>  <code>type</code>: indicate how name is interpreted as command.</li>
<li>  <code>echo</code>: write arguments, separated by spaces and terminated with newline.</li>
<li>  <code>time</code>: executed a command and print a time summary.</li>
</ul>

<h2>
<a id="user-content-14-system-commands" class="anchor" href="#14-system-commands" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.4 System Commands</h2>

<ul>
<li>  Command programs called by shell.</li>
<li>  <code>sh / bash / csh / tsch</code>: start subshell to switch among shells.</li>
<li>  <code>chsh</code>: set login shell</li>
<li>  <code>man</code>: print information about command, option names and function.</li>
<li>  <code>cat/more/less</code>: print files</li>
<li>  <code>mkdir</code>: create a new directory at specified location in file hierarchy.</li>
<li>  <code>ls</code>: list the directories and files in the specified directory.

<ul>
<li>  <code>-a</code> lists all files, including hidden files</li>
<li>  <code>-l</code> generates a long lists (details) for each file</li>
<li>  no file/directory name implies working directory</li>
</ul>
</li>
<li>  <code>cp</code>: copy files; with the <code>-r</code> option, copy directories.

<ul>
<li>  <code>-i</code> prompt for verification if a target file is being replaced.</li>
<li>  <code>-r</code> recursively copy contents of a source directory to a target directory.</li>
</ul>
</li>
<li>  <code>mv</code>: move files and/or directories to another location i the file hierarchy.

<ul>
<li>  rename source-file if target-file does not exist; otherwise replace target-file.</li>
<li>  <code>-i</code> prompt for verification if a target file is being replaced.</li>
</ul>
</li>
<li>  <code>rm</code>: remove (delete) files; with the <code>-r</code> option, remove directories.

<ul>
<li>  <code>-i</code> prompt for verification for each file/directory being removed.</li>
<li>  <code>-f</code> (default) do not prompt for removal verification for each file/directory.</li>
<li>  <code>-r</code> recursively delete the contents of a directory.</li>
<li>  <strong>UNIX does not give a second chance to recover deleted files; be careful when using <code>rm</code>, especially with globbing</strong>
</li>
<li>  UW has hidden directory .snapshot in every directory containing backups of all files in that directory.</li>
</ul>
</li>
<li>  <code>alias</code>: setting command options for particular commands.</li>
<li>  Alias can be overridden by quoting or escaping the command name.</li>
<li>  <code>lp/lpstat/lprm/lpstat</code>: add, query and remove files from the printer queues.

<ul>
<li>  if no printer is specified, use default printer (ljp_3016 in MC3016)</li>
<li>  <code>lpstat</code>: <code>-d</code> prints default printer, <code>-p</code> without printer-name lists all printers.</li>
<li>  each job on a printer's queue has a unique number.</li>
<li>  use this number to remove a job from a print queue</li>
</ul>
</li>
<li>  <code>cmp/diff</code> compare 2 files and print differences.

<ul>
<li>  return 0 if files equal (no output) and non-zero otherwise (output difference).</li>
<li>  <code>cmp</code> generates the first difference between the files.</li>
<li>  <code>diff</code> generates output describing how to change first file into second file.</li>
<li>  Useful for checking output from previous program with current program.</li>
<li>  <code>ssh</code>L (secure shell) encrypted, remote-login between hosts.</li>
<li>  To allow a remote computer to create windows on local computer, the local computer must install an X Windows Server.</li>
<li>  <code>scp</code> (secure copy) encrypted, remote-copy between hosts</li>
<li>  <code>sshfs</code> (secure shell file system) encrypted, remote-file system between hosts</li>
<li>  Make an alias to simplify the <code>sshfs</code> command.</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-15-source-code-management" class="anchor" href="#15-source-code-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.5 Source-Code Management</h2>

<ul>
<li>  As a program develops, it changes in many ways.

<ul>
<li>  UNIX files do not support the temporal development of a program (version control) i.e. history of program over time.</li>
<li>  Access to older versions of a program is useful.

<ul>
<li>  backing out changes because of design problems.</li>
<li>  multiple development versions for different companies/countries/research</li>
</ul>
</li>
</ul>
</li>
<li>  Program development is often performed by multiple developers each making independent changes.

<ul>
<li>  Sharing using files can damage file content for simultaneous writes.</li>
<li>  Merging changes from different developers is tricky and time consuming.
To solve these problems, a <strong>source-code management system</strong> (SCMS) us used to provide versioning and control cooperative work.</li>
</ul>
</li>
<li>  SCMS can provide centralized or distributed versioning (CVS/DVS)

<ul>
<li>  CVS global repository, checkout working copy</li>
<li>  DVS global repository, pull local mirror, checkout working copy</li>
</ul>
</li>
</ul>

<h3>
<a id="user-content-151-global-repository" class="anchor" href="#151-global-repository" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.5.1 Global Repository</h3>

<ul>
<li>  <strong>gitlab</strong> is a University global (cloud) repository for

<ul>
<li>  storing git repositories,</li>
<li>  sharing repositories among students doing group project.</li>
</ul>
</li>
<li>  Perform the following steps to setup your userid in the global repository.</li>
<li>  Log in <code>https://git.uwaterloo.ca/cs246/1161</code> with your WatIAM userid/password via LDAP login</li>
</ul>

<h3>
<a id="user-content-152-local-repository" class="anchor" href="#152-local-repository" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.5.2 Local Repository</h3>

<ul>
<li>  <strong>git</strong> is a distributed source-code management-system using the <strong>copy-modify-merge</strong> model.

<ul>
<li>  master copy of all <strong>project</strong> files kept in a <strong>global repository</strong>.</li>
<li>  multiple versions of the project files managed in the repository.</li>
<li>  developers <strong>pull</strong> a local copy (mirror) of the global repository for modification,</li>
<li>  developers <strong>push</strong> committed changes from local repository with integration using <strong>text merging</strong>.</li>
</ul>
</li>
<li>  <code>config</code>: registering</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ git config --global user.name <span class="pl-s"><span class="pl-pds">"</span>Jane F Doe<span class="pl-pds">"</span></span>
$ git config --global user.email jfdoe@uwaterloo.ca
$ git config --list
Jane F Doe
jfdoe@uwaterloo.ca</pre></div>

<ul>
<li>  <code>clone</code>: checkout branch or paths to working tree</li>
<li>  <code>pull</code>: update changes from global repository.</li>
</ul>

<h2>
<a id="user-content-16-pattern-matching" class="anchor" href="#16-pattern-matching" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.6 Pattern Matching</h2>

<ul>
<li>  Shells provide pattern matching of file names, <strong>globbing</strong> (regular expressions), to reduce typing lists of file names.</li>
<li>  Different shells and commands support slightly different forms and syntax for patterns.</li>
<li>  Pattern matching is provided by characters,<code>* ? { } [ ]</code>, denoting different <strong>wildcards</strong>
</li>
<li>  Patterns are composable: multiple wild-cards joined into complex pattern</li>
<li>  E.g., if the working directory is <code>/u/jfdoe/cs246/a1</code>

<ul>
<li>  matches 0 or more characters</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> q<span class="pl-k">*</span> <span class="pl-c"># shell globs “q*” to match file names, which echo prints</span>
q1x.C q2y.h q2y.cc q3z.cpp</pre></div>

<ul>
<li>? matches 1 character</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> q<span class="pl-k">*</span>.<span class="pl-k">??</span>
q2y.cc</pre></div>

<ul>
<li>  {. . .,. . .} matches any alternative in the set (at least one comma)</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-k">*</span>.{C,cc,cpp}
q1x.C q2y.cc q3z.cpp
$ <span class="pl-c1">echo</span> <span class="pl-k">*</span>.{C} <span class="pl-c"># no comma =&gt; print pattern</span>
<span class="pl-k">*</span>.{C}</pre></div>

<ul>
<li>  [. . .] matches 1 character in the set</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> q[12]<span class="pl-k">*</span>
q1x.C q2y.h q2y.cc</pre></div>

<ul>
<li>  <a href="%5E%20csh">!. . .</a> matches 1 character not in the set</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> q[<span class="pl-k">!</span>1]<span class="pl-k">*</span>
q2y.h q2y.cc q3z.cpp
1.6. PATTERN MATCHING 17</pre></div>

<ul>
<li>  Create ranges using hyphen (dash)</li>
</ul>

<div class="highlight highlight-source-shell"><pre>[0-3] <span class="pl-c"># =&gt; 0 1 2 3</span>
[a-zA-Z] <span class="pl-c"># =&gt; lower or upper case letter</span>
[<span class="pl-k">!</span>a-zA-Z] <span class="pl-c"># =&gt; any character not a letter</span></pre></div>

<p>∗ Hyphen is escaped by putting it at start or end of set</p>

<div class="highlight highlight-source-shell"><pre>[-<span class="pl-k">?*</span>]<span class="pl-k">*</span> <span class="pl-c"># =&gt; matches file names starting with -, ?, or *</span></pre></div>
</li>
<li>  If globbing pattern does not match any files, the pattern becomes the argument (including
wildcards).</li>
<li>  Hidden files, starting with “.” (dot), are ignored by globbing patterns</li>
<li>  Pattern .* matches all hidden files:

<ul>
<li>  match “.”, then zero or more characters, e.g., .bashrc, .login, etc., and “.”, “ . .”</li>
<li>  matching “.”, “ . .” can be dangerous</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ rm -r .<span class="pl-k">*</span> <span class="pl-c"># remove hidden files, and current/parent directory!!!</span></pre></div>
</li>
<li>  Pattern .[!.]* matches all single “.” hidden files but not “ .” and “ . .” directories.</li>
<li>  <code>find</code>: search for names in the file hierarchy <code>find [file/directory-list] [expr]</code>

<ul>
<li>  if <code>[file/directory-list]</code> omitted, search working directory, "."</li>
<li>  if <code>[expr]</code> omitted, match all file names</li>
<li>  <code>-name</code> pattern restrict file names to globbing pattern</li>
<li>  <code>-type f | d</code> select files of type file or directory</li>
<li>  <code>-maxdepth N</code> recursively descend at most <code>N</code> directory levels (0 at working directory)</li>
<li>  logical <code>not and or</code>
</li>
</ul>

<div class="highlight highlight-source-shell"><pre>-not expr
expr -a expr
expr -o expr</pre></div>
</li>
<li>  <code>egrep</code>: (extended global regular expression print)

<ul>
<li>  <code>-i</code> ignore case in both pattern and input files</li>
<li>  <code>-r</code> recursively examine files in directories</li>
<li>  <code>-n</code> prefix each matching line with line number</li>
<li>  <code>-v</code> select non-matching lines (invert matching)</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-17-file-permission" class="anchor" href="#17-file-permission" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.7 File Permission</h2>

<ul>
<li>  UNIX supports security for each file or directory based on 3 kinds of users:

<ul>
<li>  user: owner of the file</li>
<li>  group:  arbitrary name associated with a set of userids</li>
<li>  other: any other users</li>
</ul>
</li>
<li>  File or directory has permissions, read, write, and execute/search for the 3 sets of users.

<ul>
<li>Read/write allow specified set of users to read/write a file/directory</li>
<li>  Executable/searchable:

<ul>
<li>  file: execute as a command, e.g. file contains a program or shell script.</li>
<li>  directory: traverse through directory node but not read (cannot read file names)</li>
</ul>
</li>
</ul>
</li>
<li>  Use <code>ls -l</code> command to print file permission information.</li>
<li>  Columns are: permissions, # of directories (including . and ..), owner, group, file size, change data, file name.</li>
<li>  Permission information is:
d = directory, user permission, group permission, other permission</li>
<li>  In general, never allow "other" to read or write files</li>
<li>  Defaults permissions (usually) on

<ul>
<li>  file: <code>rw-r-----</code>
</li>
<li>  directory:  <code>rwx------</code>
</li>
</ul>
</li>
<li>  <code>chgrp</code>: change group-name associated with file.</li>
<li>  Creating/deleting group-names is done by system administrator.</li>
<li>  <code>chmod</code>: add or remove from any of the 3 security levels</li>
<li>  To achieve desired access, must associate permission along entire pathname and files</li>
</ul>

<h2>
<a id="user-content-18-inputoutput-redirection" class="anchor" href="#18-inputoutput-redirection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.8 Input/Output Redirection</h2>

<ul>
<li>  Every command has three standard files: input (0), output (1), and error (2).</li>
<li>  By default, these are connect to the keyboard (input) and screen (output/error).</li>
<li>  To close an input file from the keyboard, type control-D causing the shell to close the keyboard input file.</li>
<li>  Redirection allows

<ul>
<li>  input from a file (faster than typing at keyboard)</li>
<li>  saving output to a file for subsequent examination or processing</li>
</ul>
</li>
<li>  Redirection performed using operators &lt; for input and &gt; / &gt;&gt; for output to/from other sources.

<ul>
<li>  <code>&lt;</code> means read input from file rather than keyboard</li>
<li>  <code>&gt;</code> (same as <code>1&gt;</code>) <code>1&gt;</code> <code>2&gt;</code> means file and write output/errors to file rather than screen</li>
<li>  <code>&gt;&gt;</code> means create if needed file and append output/errors to file rather than screen.</li>
</ul>
</li>
<li>  Command is usually unaware of redirection.</li>
<li>  Can tie standard error to output (And vice versa) using <code>&gt;&amp;</code> both write to same place.</li>
<li>  Order of typing redirection files is important.</li>
<li>  To ignore output, redirect to pseudo-file <code>/dev/null</code>
</li>
<li>  Source and target cannot be the same for redirection.</li>
<li>  Redirection requires explicit creation of intermediate (temporary) files</li>
<li>  Shell pipe operator <code>|</code> makes standard output for a command the standard input for the next command, without creating intermediate file.</li>
<li>  Standard error is not piped unless redirect to standard output.</li>
</ul>

<h2>
<a id="user-content-19-script" class="anchor" href="#19-script" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.9 Script</h2>

<ul>
<li>  A <strong>shell program* or **script</strong> is a file (scriptfile) containing shell commands to be executed.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-c">#!/bin/bash [ -x ]</span>
date <span class="pl-c"># shell and OS commands</span>
whoami
<span class="pl-c1">echo</span> Hi There</pre></div>

<ul>
<li>  First line begins with magic comment: <code>#!</code> (sha-bang) with shell pathname for executing the script.</li>
<li>  Forces specific shell to be used, which is run as a subshell.</li>
<li>  If <code>#!</code> is missing, the subshell is the same as the invoking shell for sh shell (bash) and sh is used for csh shells (tcsh).</li>
<li>  Optional <code>-x</code> is for debugging and prints trace of the script during execution.</li>
<li>  Script can be invoked directly using a specific shell:</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ bash scriptfile <span class="pl-c"># direct invocation</span>
Sat Dec 19 07:36:17 EST 2009
jfdoe
Hi There<span class="pl-k">!</span></pre></div>

<p>or as a command if it has executable permissions.</p>

<div class="highlight highlight-source-shell"><pre>$ chmod u+x scriptfile <span class="pl-c"># Magic, make script file executable</span>
$ ./scriptfile <span class="pl-c"># command execution</span>
Sat Dec 19 07:36:17 EST 2009
jfdoe
Hi There<span class="pl-k">!</span></pre></div>

<ul>
<li>  Script can have parameters.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-c">#!/bin/bash [ -x ]</span>
date
whoami
<span class="pl-c1">echo</span> <span class="pl-smi">${1}</span> <span class="pl-c"># parameter for 1st argument</span></pre></div>

<ul>
<li>  Arguments are passed on the command line:</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ ./scriptfile <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
Sat Dec 19 07:36:17 EST 2009
jfdoe
Hello World
$ ./scriptfile Hello World
Sat Dec 19 07:36:17 EST 2009
jfdoe
Hello</pre></div>

<ul>
<li>  Special parameter variables to access arguments/results

<ul>
<li>  <code>${#}</code> number of arguments, excluding script name</li>
<li>  <code>${0}</code> always name of shell script</li>
<li>  <code>${1}, ${2}, ${3}</code> refers to arguments by position</li>
<li>  <code>${*}</code> and <code>${@}</code> list all arguments, excluding script name
Difference occurs inside double quotes:

<ul>
<li>  <code>${*}</code> arguments as a single string string e.g., <code>"${1} ${2} . . ."</code>
</li>
<li>  <code>${@}</code> arguments as separate strings e.g., <code>"${1}" "${2}" . . .</code>
</li>
</ul>
</li>
<li>  <code>${$}</code> process id of executing script</li>
<li>  <code>${?}</code> exit status of the last command executed</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-110-shift" class="anchor" href="#110-shift" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.10 Shift</h2>

<ul>
<li>  <code>shift [N]</code>: destructively shift parameters to the left <code>N</code> positions.

<ul>
<li>  If no N, 1 is assumed.</li>
<li>  If N is 0 or greater than ${#}, there is no shift.
<code>Bash
$ cat scriptfile
#!/bin/bash
echo ${1}; shift 1
echo ${1}; shift 2
echo ${1}; shift 3
echo ${1}
$ ./scriptfile 1 2 3 4 5 6 7
1
2
4
7
</code>
</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-111-shell-variables" class="anchor" href="#111-shell-variables" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.11 Shell Variables</h2>

<ul>
<li>  Each shell has a set of environment (global) and script (local/parameters) variables.</li>
<li>  Variable-name syntax: <code>[_a-zA-Z][_a-zA-Z0-9]*</code>, "*" is repetition modifier.</li>
<li>  <strong>Case-sensitive</strong>
</li>
<li>  <strong>Keywords</strong> are reserved identifiers</li>
<li>  Variable is declared <strong>dynamically</strong> by assigning a value with operator "=" <strong>No spaces before or after "="</strong>
</li>
<li>  Variable can be removed</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">unset</span> var <span class="pl-c"># remove variable</span>
$ <span class="pl-c1">echo</span> var is <span class="pl-smi">${var}</span>
var is <span class="pl-c"># no value for undefined variable “var”</span></pre></div>

<ul>
<li>  <strong>Variable ONLY holds string value (arbitrary length)</strong>.</li>
<li>  Variable's value is deferences using operators <code>$</code> or <code>${}</code>
</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-smi">$a1</span> <span class="pl-smi">${a1}</span>
/u/jfdoe/cs246/a1 /u/jfdoe/cs246/a1
$ <span class="pl-c1">cd</span> <span class="pl-smi">$a1</span> <span class="pl-c"># or ${a1}</span></pre></div>

<ul>
<li>  Dereferencing an undefined variable returns an empty string.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> var is <span class="pl-smi">${var}</span> <span class="pl-c"># no value for undefined variable “var”</span>
var is
$ var=Hello
$ <span class="pl-c1">echo</span> var is <span class="pl-smi">${var}</span>
var is Hello</pre></div>

<ul>
<li>  <strong>Beware concatenation</strong>
</li>
<li>  Always use braces to allow concatenation with other text.</li>
<li>  Shell has 3 sets of variables: environment, local, routine parameters.</li>
<li>  New variable declare on the local list.</li>
<li>  A variable is moved to environment list if exported.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-k">export</span> var <span class="pl-c"># move from local to environment list</span></pre></div>

<ul>
<li>  Login shell starts with a number of useful environment variable</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">set</span> <span class="pl-c"># print variables/routines (and values)</span>
HOME=/u/jfdoe <span class="pl-c"># home directory</span>
HOSTNAME=linux006.student.cs <span class="pl-c"># host computer</span>
PATH=. <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># lookup directories for OS commands</span>
SHELL=/bin/bash <span class="pl-c"># login shell</span></pre></div>

<ul>
<li>  A script executes in its own subshell with a copy of calling shell's environment variables (works across different shells), but not calling shell's local or arguments.</li>
<li>  When a (sub)shell ends, changes to its environment variables do not affect the containing shell (<strong>environment variables only affect subshells</strong>).</li>
<li>  <strong>Only put a variable in the environment list to make it accessible by subshells.</strong>
</li>
</ul>

<h2>
<a id="user-content-112-arithmetic" class="anchor" href="#112-arithmetic" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.12 Arithmetic</h2>

<ul>
<li>  Arithmetic requires integers</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ i=3+1
$ j=<span class="pl-smi">${i}</span>+2
$ <span class="pl-c1">echo</span> <span class="pl-smi">${i}</span> <span class="pl-smi">${j}</span>
3+1 3+1+2</pre></div>

<ul>
<li>  Arithmetic is performed by

<ul>
<li>  Converting a string to an integer (if possible)</li>
<li>  Performing an integer operation</li>
<li>  Converting the integer result back to a string</li>
</ul>
</li>
<li>  Bash performs these steps by with shell-command operator <code>$((expression))</code>.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">$((</span><span class="pl-c1">3</span> <span class="pl-k">+</span> <span class="pl-c1">4</span> <span class="pl-k">-</span> <span class="pl-c1">1</span><span class="pl-pds">))</span></span>
6
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">$((</span><span class="pl-c1">3</span> <span class="pl-k">+</span> <span class="pl-smi">${i}</span> <span class="pl-k">*</span> <span class="pl-c1">2</span><span class="pl-pds">))</span></span>
8
$ <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">$((</span><span class="pl-c1">3</span> <span class="pl-k">+</span> <span class="pl-smi">${k}</span><span class="pl-pds">))</span></span> <span class="pl-c"># k is unset</span>
bash: 3 + <span class="pl-c1">:</span> syntax error: operand expected (error token is <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>  Basic integer operation <code>+ - * / %</code> with usual precedence and <code>()</code>.</li>
<li>  For shells without arithmetic shell-command (e.g. sh, csh), use system command <code>expr</code>
</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ expr 3 + 4 - 1 <span class="pl-c"># for sh, csh</span>
6
$ expr 3 + <span class="pl-smi">${i}</span> <span class="pl-cce">\*</span> 2 <span class="pl-c"># escape *</span>
8
$ expr 3 + <span class="pl-smi">${k}</span> <span class="pl-c"># k is unset</span>
expr: non-numeric argument</pre></div>

<h2>
<a id="user-content-113-routine" class="anchor" href="#113-routine" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.13 Routine</h2>

<ul>
<li>  Routine is a script in a script</li>
</ul>

<div class="highlight highlight-source-shell"><pre>routine <span class="pl-en">name</span>() { <span class="pl-c"># number of parameters depends on call</span>
    <span class="pl-c"># commands</span>
}</pre></div>

<ul>
<li>  Invoke like a script.</li>
<li>  Variables/routines should be created before used.</li>
<li>  E.g. create a routine to print incorrect usage-message.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-en">usage</span>() {
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>Usage: <span class="pl-smi">${0}</span> -t -g -e input-file [ output-file ]<span class="pl-pds">"</span></span>
<span class="pl-c1">exit</span> 1 <span class="pl-c"># terminate script with non-zero exit code</span>
}
usage <span class="pl-c"># call, no arguments</span></pre></div>

<ul>
<li>  Routine arguments are accessed the same as in a script</li>
</ul>

<div class="highlight highlight-source-shell"><pre>cat scriptfile
<span class="pl-c">#!/bin/bash</span>
<span class="pl-en">rtn</span>() {
    <span class="pl-c1">echo</span> <span class="pl-smi">${<span class="pl-k">#</span>}</span> <span class="pl-c"># number of command-line arguments</span>
    <span class="pl-c1">echo</span> <span class="pl-smi">${0}</span> <span class="pl-smi">${1}</span> <span class="pl-smi">${2}</span> <span class="pl-smi">${3}</span> <span class="pl-smi">${4}</span> <span class="pl-c"># arguments passed to routine</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${<span class="pl-k">*</span>}</span><span class="pl-pds">"</span></span> <span class="pl-c"># all arguments as a single string</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${<span class="pl-k">@</span>}</span><span class="pl-pds">"</span></span> <span class="pl-c"># all arguments as separate strings</span>
    <span class="pl-c1">echo</span> <span class="pl-smi">${$}</span> <span class="pl-c"># process id of executing subshell</span>
    <span class="pl-k">return</span> 17 <span class="pl-c"># routine exit status</span>
}
rtn a1 a2 a3 a4 a5 <span class="pl-c"># invoke routine</span>
<span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># print routine exit status</span>
<span class="pl-c1">exit</span> 21 <span class="pl-c"># script exit status</span>
$ ./scriptfile <span class="pl-c"># run script</span>
5 <span class="pl-c"># number of arguments</span>
scriptfile a1 a2 a3 a4 <span class="pl-c"># script-name / args 1-5</span>
a1 a2 a3 a4 a5 <span class="pl-c"># args 1-5, 1 string</span>
a1 a2 a3 a4 a5 <span class="pl-c"># args 1-5, 5 strings</span>
27028 <span class="pl-c"># process id of subshell</span>
17 <span class="pl-c"># routine exit status</span>
$ <span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># print script exit status</span>
21</pre></div>

<ul>
<li>  <code>source</code> filename: execute commands from a file in the current shell.

<ul>
<li>  For convenience or code sharing, subdivided script into multiple files.</li>
<li>  No <code>#!...</code> at top, because not invoked directly like a script.</li>
<li>  Sourcing file includes it into current shell script and evaluates lines.</li>
<li>  Created or modified variables/routines from sourced file immediately affect current shell.</li>
</ul>
</li>
</ul>

<h2>
<a id="user-content-114-control-structures" class="anchor" href="#114-control-structures" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.14 Control Structures</h2>

<ul>
<li>  Shell provides control structures for conditional and iterative execution; syntax for bash is presented</li>
</ul>

<h3>
<a id="user-content-1141-test" class="anchor" href="#1141-test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.14.1 Test</h3>

<ul>
<li>  Test (<code>[]</code>) command compares strings, integers and queries files.</li>
<li>  Test expression is constructed using the following:</li>
</ul>

<table>
<thead>
<tr>
<th>Test</th>
<th>Operation</th>
<th>Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>! expr</code></td>
<td>not</td>
<td>high</td>
</tr>
<tr>
<td><code>\( expr \)</code></td>
<td>evaluation order (must be escaped)</td>
<td></td>
</tr>
<tr>
<td><code>expr1 -a expr2</code></td>
<td>logical and (not short-circuit)</td>
<td></td>
</tr>
<tr>
<td><code>expr1 -o expr2</code></td>
<td>logical or (not short-circuit)</td>
<td>low</td>
</tr>
</tbody>
</table>

<ul>
<li>  Test comparison is performed using the following:</li>
</ul>

<table>
<thead>
<tr>
<th>test</th>
<th>operation</th>
</tr>
</thead>
<tbody>
<tr>
<td>string1 = string2</td>
<td>equal (not ==)</td>
</tr>
<tr>
<td>string1 != string2</td>
<td>not equal</td>
</tr>
<tr>
<td>integer1 -eq integer2</td>
<td>equal</td>
</tr>
<tr>
<td>integer1 -ne integer2</td>
<td>not equal</td>
</tr>
<tr>
<td>integer1 -ge integer2</td>
<td>greater or equal</td>
</tr>
<tr>
<td>integer1 -gt integer2</td>
<td>greater</td>
</tr>
<tr>
<td>integer1 -le integer2</td>
<td>less or equal</td>
</tr>
<tr>
<td>integer1 -lt integer2</td>
<td>less</td>
</tr>
<tr>
<td>-d file</td>
<td>exists and directory</td>
</tr>
<tr>
<td>-e file</td>
<td>exists</td>
</tr>
<tr>
<td>-f file</td>
<td>exists and regular file</td>
</tr>
<tr>
<td>-r file</td>
<td>exists with read permission</td>
</tr>
<tr>
<td>-w file</td>
<td>exists with write permission</td>
</tr>
<tr>
<td>-x file</td>
<td>exists with executable or searchable</td>
</tr>
</tbody>
</table>

<ul>
<li>  Logical operators <code>-a</code> (and) and <code>-o</code> (or) evaluate both operands.</li>
<li>  <code>test</code> returns 0 if expression is true and 1 otherwise (counter intuitive)</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ i=3
$ <span class="pl-c1">test</span> 3 -lt 4 <span class="pl-c"># integer test</span>
$ <span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># true</span>
0
$ [ 8whoami 8 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>jfdoe<span class="pl-pds">"</span></span> ] <span class="pl-c"># string test, need spaces</span>
$ <span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># false</span>
1
$ [ 2 <span class="pl-k">-lt</span> <span class="pl-smi">${i}</span> <span class="pl-k">-o</span> 8whoami 8 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>jfdoe<span class="pl-pds">"</span></span> ] <span class="pl-c"># compound test</span>
$ <span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># true</span>
0
$ [ <span class="pl-k">-e</span> q1.cc ] <span class="pl-c"># file test</span>
$ <span class="pl-c1">echo</span> <span class="pl-smi">${?}</span> <span class="pl-c"># true</span>
0</pre></div>

<h3>
<a id="user-content-1142-selection" class="anchor" href="#1142-selection" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.14.2 Selection</h3>

<ul>
<li>  An <code>if</code> statement provides conditional control-flow.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">if</span> test-command
    <span class="pl-k">then</span>
        commands
<span class="pl-k">elif</span> test-command
    <span class="pl-k">then</span>
        commands
...
<span class="pl-k">else</span>
    commands
<span class="pl-k">fi</span>

<span class="pl-k">if</span> test-command <span class="pl-k">;</span> <span class="pl-k">then</span>
    commands
<span class="pl-k">elif</span> test-command <span class="pl-k">;</span> <span class="pl-k">then</span>
    commands
<span class="pl-k">else</span>
    commands
<span class="pl-k">fi</span></pre></div>

<ul>
<li>  test-command is evaluated; exit status of zero implies true, otherwise false.</li>
<li>  Check for different conditions:</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">if</span> [ <span class="pl-s"><span class="pl-pds">"</span>8whoami8<span class="pl-pds">"</span></span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>jfdoe<span class="pl-pds">"</span></span> ] <span class="pl-k">;</span> <span class="pl-k">then</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>valid userid<span class="pl-pds">"</span></span>
<span class="pl-k">else</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>invalid userid<span class="pl-pds">"</span></span>
<span class="pl-k">fi</span>
<span class="pl-k">if</span> diff file1 file2 <span class="pl-k">&gt;</span> /dev/null <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c"># ignore diff output, check exit status</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>same files<span class="pl-pds">"</span></span>
<span class="pl-k">else</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>different files<span class="pl-pds">"</span></span>
<span class="pl-k">fi</span>
<span class="pl-k">if</span> [ <span class="pl-k">-x</span> /usr/bin/cat ] <span class="pl-k">;</span> <span class="pl-k">then</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>cat command available<span class="pl-pds">"</span></span>
<span class="pl-k">else</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>no cat command<span class="pl-pds">"</span></span>
<span class="pl-k">fi</span></pre></div>

<ul>
<li>  <strong>Beware unset variables or values with special characters (e.g. blanks)</strong>
</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">if</span> [ <span class="pl-smi">${var}</span> <span class="pl-k">=</span> ’yes’ ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># var unset =&gt; if [ = ’yes’ ]</span>
bash: [: <span class="pl-k">=</span>: unary operator expected
<span class="pl-k">if</span> [ <span class="pl-smi">${var}</span> <span class="pl-k">=</span> ’yes’ ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># var=“a b c” =&gt; if [ a b c = ’yes’ ]</span>
bash: [: too many arguments
<span class="pl-k">if</span> [ <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${var}</span><span class="pl-pds">"</span></span> <span class="pl-k">=</span> ’yes’ ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># var unset =&gt; if [ “” = ’yes’ ]</span>
<span class="pl-k">if</span> [ <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${var}</span><span class="pl-pds">"</span></span> <span class="pl-k">=</span> ’yes’ ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># var=“a b c” =&gt; if [ “a b c” = ’yes’ ]</span></pre></div>

<ul>
<li>  <strong>When dereferencing, always quote variables</strong>, except for safe variables <code>${#} ${$} ${?}</code> which generate numbers.</li>
<li>  A <code>case</code> statement selectively executes one of N alternatives based on matching a string expression with a series of pattern (globbing) e.g.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">case</span> expression in
    pattern | pattern | . . . ) commands ;;
    . . .
    <span class="pl-k">*</span> ) commands ;; <span class="pl-c"># optional match anything (default)</span>
<span class="pl-k">esac</span></pre></div>

<ul>
<li>  When a pattern is matched, the commands are executed up to <code>;;</code> and control exists the <code>case</code> statement.</li>
<li>  If no pattern is matched, the <code>case</code> statement does nothing.</li>
<li>  E.g. command with only one of these options: <code>-h, --help, -v, --verbose, -f file, --file file</code> use <code>case</code> statement to process option:</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-en">usage</span>() { <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> } <span class="pl-c"># print message and terminate script</span>
verbose=no <span class="pl-c"># default value</span>
<span class="pl-k">case</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${1}</span><span class="pl-pds">"</span></span> in <span class="pl-c"># process single option</span>
    ’-h’ | ’--help’ ) usage ;;
    ’-v’ | ’--verbose’ ) verbose=yes ;;
    ’-f’ | ’--file’ ) <span class="pl-c"># has additional argument</span>
        <span class="pl-c1">shift</span> 1 <span class="pl-c"># access argument</span>
        file=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${1}</span><span class="pl-pds">"</span></span>
        ;;
    <span class="pl-k">*</span> ) usage ;; <span class="pl-c"># default, has to be one argument</span>
<span class="pl-k">esac</span>
<span class="pl-k">if</span> [ <span class="pl-smi">${<span class="pl-k">#</span>}</span> <span class="pl-k">-ne</span> 1 ] <span class="pl-k">;</span> <span class="pl-k">then</span> usage <span class="pl-k">;</span> <span class="pl-k">fi</span> <span class="pl-c"># check only one argument remains</span>
<span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># execute remainder of command</span></pre></div>

<h3>
<a id="user-content-1143-looping" class="anchor" href="#1143-looping" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.14.3 Looping</h3>

<ul>
<li>  <code>while</code> statement executes its commands zero or more times.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">while</span> test-command
    <span class="pl-k">do</span>
        commands
<span class="pl-k">done</span>

<span class="pl-k">while</span> test-command <span class="pl-k">;</span> <span class="pl-k">do</span>
    commands
<span class="pl-k">done</span></pre></div>

<ul>
<li>  test-command is evaluated; exit status of zero implies true, otherwise false.</li>
<li>  Check for different conditions:</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># print command-line parameters, destructive</span>
<span class="pl-k">while</span> [ <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${1}</span><span class="pl-pds">"</span></span> <span class="pl-k">!=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> ] <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c"># string compare</span>
    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${1}</span><span class="pl-pds">"</span></span>
    <span class="pl-c1">shift</span> <span class="pl-c"># destructive</span>
<span class="pl-k">done</span>

<span class="pl-c"># print command-line parameters, non-destructive</span>
i=1
<span class="pl-k">while</span> [ <span class="pl-smi">${i}</span> <span class="pl-k">-le</span> <span class="pl-smi">${<span class="pl-k">#</span>}</span> ] <span class="pl-k">;</span> <span class="pl-k">do</span>
    <span class="pl-c1">eval</span> <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\$</span>{<span class="pl-smi">${i}</span>}<span class="pl-pds">"</span></span> <span class="pl-c"># second substitution of “${1}” to its value</span>
    i=<span class="pl-s"><span class="pl-pds">$((</span><span class="pl-smi">${i}</span> <span class="pl-k">+</span> <span class="pl-c1">1</span><span class="pl-pds">))</span></span>
<span class="pl-k">done</span>

<span class="pl-c"># process files data1, data2, . . .</span>
i=1
file=data<span class="pl-smi">${i}</span>
<span class="pl-k">while</span> [ <span class="pl-k">-f</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${file}</span><span class="pl-pds">"</span></span> ] <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c"># file regular and exists?</span>
    <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># process file</span>
    i=<span class="pl-s"><span class="pl-pds">$((</span><span class="pl-smi">${i}</span> <span class="pl-k">+</span> <span class="pl-c1">1</span><span class="pl-pds">))</span></span> <span class="pl-c"># advance to next file</span>
    file=data<span class="pl-smi">${i}</span>
<span class="pl-k">done</span></pre></div>

<ul>
<li>  <code>for</code> statement is a specialized <code>while</code> statement for iterating with an index over list or whitespace-delimited strings.</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">for</span> <span class="pl-smi">index [</span> <span class="pl-k">in</span> list ] <span class="pl-k">;</span> <span class="pl-k">do</span>
    commands
<span class="pl-k">done</span>

<span class="pl-k">for</span> <span class="pl-smi">name</span> <span class="pl-k">in</span> ric peter jo mike <span class="pl-k">;</span> <span class="pl-k">do</span>
    <span class="pl-c1">echo</span> <span class="pl-smi">${name}</span>
<span class="pl-k">done</span>

<span class="pl-k">for</span> <span class="pl-smi">arg</span> <span class="pl-k">in</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${<span class="pl-k">@</span>}</span><span class="pl-pds">"</span></span> <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c"># process parameters, why quotes?</span>
    <span class="pl-c1">echo</span> <span class="pl-smi">${arg}</span>
<span class="pl-k">done</span></pre></div>

<ul>
<li>  Or over a set of values:</li>
</ul>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">for</span> <span class="pl-s"><span class="pl-pds">((</span> init<span class="pl-k">-</span>expr; test<span class="pl-k">-</span>expr; incr<span class="pl-k">-</span>expr <span class="pl-pds">))</span></span> <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c"># double parenthesis</span>
    commands
<span class="pl-k">done</span>
<span class="pl-k">for</span> <span class="pl-s"><span class="pl-pds">((</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>; i <span class="pl-k">&lt;=</span> <span class="pl-smi">${<span class="pl-k">#</span>}</span>; i <span class="pl-k">+=</span> <span class="pl-c1">1</span> <span class="pl-pds">))</span></span> <span class="pl-k">;</span> <span class="pl-k">do</span>
    <span class="pl-c1">eval</span> <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\$</span>{<span class="pl-smi">${i}</span>}<span class="pl-pds">"</span></span> <span class="pl-c"># second substitution of “${1}” to its value</span>
<span class="pl-k">done</span></pre></div>

<ul>
<li>  Use directly on command line (rename <code>.cpp</code> file into <code>.cc</code>)</li>
</ul>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-k">for</span> <span class="pl-smi">file</span> <span class="pl-k">in</span> <span class="pl-k">*</span>.cpp <span class="pl-k">;</span> <span class="pl-k">do</span> mv <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${file}</span><span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${file<span class="pl-k">%</span>cpp}</span><span class="pl-pds">"</span></span>cc <span class="pl-k">;</span> <span class="pl-k">done</span></pre></div>

<p><code>%</code> removes matching suffix; <code>#</code> removes matching prefix</p>

<ul>
<li>  A <code>while/for</code> loop may contain <code>break</code> and <code>continue</code> to terminate loop or advance to the next loop iteration.</li>
</ul>

<div class="highlight highlight-source-shell"><pre>i=1 <span class="pl-c"># process files data1, data2, . . .</span>
<span class="pl-k">while</span> [ 0 ] <span class="pl-k">;</span> <span class="pl-k">do</span> <span class="pl-c"># while true, infinite loop</span>
    file=data<span class="pl-smi">${i}</span> <span class="pl-c"># create file name</span>
    <span class="pl-k">if</span> [ <span class="pl-k">!</span> <span class="pl-k">-f</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">${file}</span><span class="pl-pds">"</span></span> ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-c1">break</span> <span class="pl-k">;</span> <span class="pl-k">fi</span> <span class="pl-c"># file not exist, stop ?</span>
        <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># process file</span>
    <span class="pl-k">if</span> [ <span class="pl-smi">${?}</span> <span class="pl-k">-ne</span> 0 ] <span class="pl-k">;</span> <span class="pl-k">then</span> <span class="pl-k">continue</span> <span class="pl-k">;</span> <span class="pl-k">fi</span> <span class="pl-c"># bad return, next file</span>
        <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c1">.</span> <span class="pl-c"># process file</span>
        i=<span class="pl-s"><span class="pl-pds">$((</span><span class="pl-smi">${i}</span> <span class="pl-k">+</span> <span class="pl-c1">1</span><span class="pl-pds">))</span></span> <span class="pl-c"># advance to next file</span>
<span class="pl-k">done</span></pre></div>
</article></body></html>